
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>LineDevs Console Logs</title>
<link rel="icon" href="/server_icon.png" type="image/png">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>
<style>
  body { font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:#f7f9fc; color:#111827; margin:0; }
  header { background:#5865F2; color:white; padding:16px 24px; display:flex; align-items:center; justify-content:space-between; }
  header h1 { margin:0; font-size:18px; }
  .container { padding:24px; display:grid; grid-template-columns:2fr 1fr; gap:16px; }
  .card { background:white; border-radius:8px; padding:16px; box-shadow:0 6px 18px rgba(14,30,37,0.06); }
  footer { text-align:center; padding:12px; color:#6b7280; font-size:13px; }
  a.btn { background:#5865F2; color:white; padding:8px 12px; border-radius:6px; text-decoration:none; display:inline-block; }
</style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:12px;">
    <img src="/server_icon.png" alt="logo" style="width:40px;height:40px;border-radius:8px;">
    <h1>LineDevs Console Logs</h1>
  </div>
  <div>
    <a class="btn" href="/donation">Donate</a>
    <a class="btn" href="https://discord.gg/SpHQXmXxP" target="_blank" style="margin-left:8px;background:#0f62fe">Join Discord</a>
  </div>
</header>
<main class="container">
  <section class="card">
    <h2>Console Logs</h2>
    <div id="console" style="background:#0b1220;color:#e6eef8;padding:12px;border-radius:6px;height:48vh;overflow:auto;font-family:monospace;font-size:12px;"></div>
  </section>
  <aside class="card">
    <h3>Metrics</h3>
    <p>Status: <span id="status">loading</span></p>
    <p>Uptime (s): <span id="uptime">0</span></p>
    <p>Memory (MB): <span id="memory">0</span></p>
    <canvas id="memChart" height="120" style="width:100%"></canvas>
    <canvas id="lagChart" height="120" style="width:100%;margin-top:12px"></canvas>
  </aside>
</main>
<footer>Â©2025 - Zypher - Render - Version 3.1.1</footer>
<script>
const socket = io();
const consoleEl = document.getElementById('console');
function addLog(item){ const el = document.createElement('div'); el.textContent = item.msg; if (item.level==='ERROR') el.style.color='#ff4d4f'; else if (item.level==='WARN') el.style.color='#d97706'; consoleEl.appendChild(el); consoleEl.scrollTop = consoleEl.scrollHeight; document.getElementById('status').textContent = item.level==='SYSTEM' ? 'online' : document.getElementById('status').textContent; }
socket.on('logs', logs => logs.forEach(addLog));
socket.on('metrics', m => {
  document.getElementById('uptime').textContent = m.uptime || 0;
  document.getElementById('memory').textContent = m.memoryUsageMB || 0;
  document.getElementById('status').textContent = m.status || 'unknown';
  // update charts
  addPoint(m);
});
socket.on('connect', () => addLog({ level:'SYSTEM', msg: '[SYSTEM] ' + new Date().toISOString() + ' - Dashboard connected via socket' }));
socket.on('disconnect', () => addLog({ level:'SYSTEM', msg: '[SYSTEM] Disconnected' }));

// charts
const memCtx = document.getElementById('memChart').getContext('2d');
const lagCtx = document.getElementById('lagChart').getContext('2d');
const memChart = new Chart(memCtx, { type:'line', data:{ labels:[], datasets:[{ label:'Memory MB', data:[], fill:false }] }, options:{ responsive:true } });
const lagChart = new Chart(lagCtx, { type:'bar', data:{ labels:[], datasets:[{ label:'Lag Spikes', data:[] }] }, options:{ responsive:true } });
function addPoint(m){ const t = new Date().toLocaleTimeString(); memChart.data.labels.push(t); memChart.data.datasets[0].data.push(m.memoryUsageMB); if (memChart.data.labels.length>20){ memChart.data.labels.shift(); memChart.data.datasets[0].data.shift(); } memChart.update(); lagChart.data.labels.push(t); lagChart.data.datasets[0].data.push(m.lagSpikes); if (lagChart.data.labels.length>20){ lagChart.data.labels.shift(); lagChart.data.datasets[0].data.shift(); } lagChart.update(); }
</script>
</body>
</html>
